<html><body>
<h3>[13] IMPORT EXPORT </h3>
When you are done, export the survey data and the sketches in your favourite format and transfer the
exported files to your PC, to finish up drafting the cave maps.<br><p>

Survey data, and zip archive, are exported from the <u>Survey Info window</u>.<br>
Survey sketches are exported from the <u>Drawing window</u> (single sketch) and from the <u>Overview window</u> (all sketches of a view in one file).<br><p>

TopoDroid zip archives are stored in the <i>zip</i> subfolder of the "TopoDroid" folder.<br><p>

Exported data and sketches files are stored in the "out" subfolder of the survey folder.<br><p>

The destination file of exports of 3D models are chosen with a system filemanager.<br><p>

<!-- 
File for survey import are searched in the <i>import</i> folder.<br>
Zip archives for import are searched in the <i>zip</i> folder.<br><p>

<b>Default export formats</b><br>
TopoDroid has two settings to set a default export format for the survey data and one for the sketches.
By default these are both set to "none", ie, no export.
<br><p>

When the default survey data export format is set, TopoDroid exports the survey data in that format before creating a zip archive, so that the export is included in the archive.<br><p>

When the default sketch export format is set, the sketches are exported in this format whenever they are closed from the <u>Drawing window</u>.<br>
For cSurvey x-sections are saved as PNG images.<br><p>
-->

<h4>ZIP ARCHIVES ".zip"</h4>
For safety make a TopoDroid zip archive and transfer it to your PC.
The zip archive is a complete backup of your survey, and it
contains the command to restore the survey data and other information in the database.
You can use it to transfer the survey to a TopoDroid on another Android.<br><p>

Zip archives are exported from the <u>Survey Info window</u>, from the "Export" menu.<br>

When exporting a zip archive you can check to immediately share it afterward.
If you have a custom app to handle exported zip archives you can override the default
system sharing apps and have it invoked specifing its "category".<br><p>

Zip archives are stored in the <i>zip</i> subfolder of the current TopoDroid work folder.<br>
The name of the zip archive is the survey name.<br>
By default the zip file is overwritten when the archive is exported again. 
If the user uncheck the <i>Overwrite</i> box the zip files are not overwritten and 
the zip filename is the survey name followed by a number<br><p>

Zip archives are imported from the <u>Main window</u> with the "Import" button.<br><p>

Zip import fails if the zip has a database version that is too old or is newer than the one in TopoDroid.
The error codes are
<ul>
<li>1: IO error</li>
<li>2: zip TopoDroid version too old</li>
<li>3: zip database version too old</li>
<li>4: zip database version too new</li>
<li>5: survey name differs from filename</li>
<li>6: survey already present</li>
<li>7: failed to open database</li>
<li>8: zip SQL error</li>
<li>9: number format error</li>
<li>10: manifest format error</li>
<li>11: manifest not found</li>
<li>12: manifest IO error</li>
<li>13: unexpected error</li>
</ul><br><p>

Note, splay custom colors are not imported unless the appropriate setting is enabled.
<br><p>

<a href="page_import.htm">Survey data import</a><br><p>

<h4>SURVEY DATA EXPORT</h4>
TopoDroid exports survey data to the following cave-program formats:
<ul>
<li><a href="#compass">Compass</a> ".dat"</li>
<li><a href="#csurvey">cSurvey</a> ".csx"</li>
<li><a href="#survex">Survex</a> ".svx"</li>
<li><a href="#therion">Therion</a> ".th"</li>
<li><a href="#trobot">TopoRobot</a> ".text"</li>
<li><a href="#vtopo">VisualTopo</a> ".tro", ".trox"</li>
<li><a href="#walls">Walls</a> ".srv"</li>
<li><a href="#winkarst">WinKarst</a> ".sur"</li>
<!-- li><a href="#ghtopo">GHTopo</a></li -->
<li><a href="#polygon">Polygon</a> ".cave"</li>
<li><a href="#topo">Topo</a> ".cav"</li>
</ul>

Furthermore it exports survey data as
<ul>
<li><a href="#csv">CSV</a> ".csv"</li>
<li><a href="#dxf">DXF</a> ".dxf"</li>
<li><a href="#kml">KML</a> ".kml"</li>
<li><a href="#gpx">GPX track</a> ".gpx"</li>
<li><a href="#shp">shapefile</a> ".shz"</li>
</ul>
If the survey is not georeferenced the survey data cannot be exported in the last four export formats.
<br><p>

Georeference points are exported with coordinates latitude-longitude [decimal degrees] and altitude above
mean sea level [m].<br>
H/V-splays are treated as normal splays in the exports.<br><p>

The dialog to export the survey data presents only the format that are enabled in "ENABLE" subset of the
"Import/Export" settings.<br><p>

<i>The settings affecting the exported data/file are listed for each export format.</i><br><p>


The following export formats are no longer supported:
<ul>
<li><a href="">Grottolf</a></li>
<li><a href="">GHTopo</a></li>
<li><a href="">PocketTopo</a></li>
<li><a href="">PLT file (OziExplorer)</a></li>
<li><a href="">GeoJSON</a></li>
</ul>
<br><p>

<b id="compass">Compass</b> ".dat"<br>
<i>Compass</i> data file are supported both in import and in export.<br>
Supported data format are "normal" and "diving".<br>
Data units are 'feet' and 'degrees' (converted to meters and degrees inside TopoDroid).<br><p>

Settings:<ul style="margin-top=0">
<li><u>Station prefix</u>: if given it is prepended to the station names</li>
<li><u>Splays</u></li>
<li><u>L/R swap</u></li>
</ul>
<br><p>

<b id="csurvey">cSurvey</b> ".csx"<br>
The cSurvey export files require cSurvey v. 1.20 or later.<br>
The <i>cSurvey</i> export from the <u>Survey Info window</u> includes only the
survey data, and does not have any sketch.<br>
To make a <i>cSurvey</i> export with a sketch (both plan and profile),
you should export from the <u>Drawing window</u>.
<br><p>

The <i>cSurvey</i> export includes the calibration-check shots and can include media files
(audio and photo).<br><p>

Settings:<ul style="margin-top=0">
<li><u>station prefix</u>: whether to prefix the station names with the survey name</li>
<li><u>media export</u>: whether to include media in the export</li>
</ul><p>


<b id="survex">Survex</b> ".svx"<br>
Survey data can be exported as <i>Survex</i> files.<br>
Data units follow the user options.<br><p>

The TopoDroid team string is listed commented, by default.<br>
If the "Team names" setting is set to something other than "Text plain", the TopoDroid team is parsed and split into the Survex <i>team</i> commands.<br><p>

Settings:<ul style="margin-top=0">
<li><u>line termination</u> can be either Linux or Windows</li>
<li><u>named TO station</u> for splay shots (the TO name is the FROM station with a letter appended)</li>
<li>add <u>LRUD</u> to export</li>
<li>Survex "cs out" <u>EPSG</u> number</li>
</ul><p>

<b id="therion">Therion</b> ".th"<br>
Survey data are exported in <i>Therion</i> format, using the data "normal" form.<br>
The TopoDroid survey name is used for the Therion cave name, with underscore '_' replaced by space.<br>
Data units follow the user options.<br><p>

The TopoDroid team string is listed commented, by default.<br>
If the "Team names" setting is set to something other than "Text plain", the TopoDroid team is parsed
and split into the Therion <i>team</i> commands.<br><p>

Station comments and marks (fixed, painted) precede the centerline data.<br>
X-splays are exported with station "-" (dash), the others with station "." (dot).<br>
Commented shots are exported under comment (#).<br><p>

For the extend the syntax "extend &lt;flag&gt;" is used before any leg, with flag equals to "left", "right",
or "vert". For splays that do not have extend, TopoDroid writes "# extend auto", as a comment because it is not a
valid Therion command.<br><p>

Fractional extend is supported in Therion since v. 5.2.2 and it is exported if it is set.<br><p>

Fixed points coordinates (longitude latitude and altitude a.s.l.) are exported commented.
If the point has custom CRS coordinates, these are included as well, preceded by the CRS name.<br><p>

Furthermore "input" of the th2 files and definitions of maps for each scrap are added at the end, but are commented.
They must be uncommented to get the drawings in the PDF output of Therion.<br><p>

The <i>Therion</i> export includes the calibration-check shots, as comment.<br><p>

Settings:<ul style="margin-top=0">
<li><u>Therion thconfig</u>: if enabled, a simple thconfig file with Therion configuration commands is created.</li>
<li><u>Therion maps</u>: if enabled the "map" commands are placed before the centerline.</li>
<li>add <u>LRUD</u> to export</li>
</ul><p>

<u>thconfig</u><br>
With this option TopoDroid exports a Therion configuration file.
This file contains the configuration commands to create the pdf of the plan and extended profile maps.<br>
Running therion on the exported file generates a simple PDF map.<br><p>


The TopoDroid parsing of <i>Therion</i> data syntax is very limited. Only data in "normal" form are understood.
The Therion data commands "units", "flag", "extend", "mark" and "station" are supported.<br>
Fixed points ("fix") are parsed but not taken into account as "cs" is not supported.<br><p>


<b id="trobot">TopoRobot</b> ".text"<br>
<i>TopoRobot</i> data file are supported both in import and in export.<br>
Survey data can be exported as <i>TopoRobot</i> files. The <i>TopoRobot</i> station naming policy
must have been selected. If the station names follow <i>TopoRobot</i> convention "series.number", they are used.<br><p>

For <i>TopoRobot</i> export the <u>filename</u>, including the extension, can be specified in the export dialog.
The filename can include only alphabetic characters, a-z and A-Z, and digits, 0-9.
If it is longer than 8 characters it is truncated to the first eight characters.
The name of the survey in the file is the filename without extension.<br>
The export can also be limited to the last portion of data, by specifing the index
of the <u>first shot</u> to export.<br><p>


<b id="vtopo">VisualTopo</b> ".tro", ".trox"<br>
<i>VisualTopo</i> data file are supported both in import and in export.<br>
VisualTopo splays are included if enabled.<br>
By default LRUD are at the TO station, but they can be set at the FROM station.<br> 
Data units are 'meters' and 'degrees'.<br>
Survey in <i>diving</i> data-mode are exported in "trox" format.<br><p>

Settings:<ul style="margin-top=0">
<li><u>Tro</u> old format. By default data are saved in "trox" format</li>
<li><u>Splays</u></li>
<li><u>LRUD at From</u></li>
<li><u>Station series</u>: if specified the station names are qualified with the series</li>
<li><u>Faverjon</u> whether the series is a prefix instead of a suffix.</li>
</ul>
<br><p>

<b id="walls">Walls</b> ".srv"<br>
<i>Walls</i> data file are supported both in import and in export.<br>
Survey data can be exported as <i>Walls</i> files (partially tested).<br>
Data units follow the user options.<br>
If the "Walls splays" setting is set the splay shots are exported as "named" splays (as for Compass).
Otherwise they are exported as "anonymous point shots", (wall-shots).<br>
<p>

Settings:<ul style="margin-top=0">
<li><u>Walls splay</u>: whether to export splays as splay-shots, "12 12-1", or as wall-shots, "12 -".</li>
</ul>
<br><p>

<b id="winkarst">WinKarst</b> ".sur"<br>
Survey data can be exported as <i>WinKarst</i> files (untested).<br><p>

Settings:<ul style="margin-top=0">
<li><u>Station prefix</u>: if given it is prepended to the station names</li>
</ul>
<br><p>

<b id="ptopo">PocketTopo</b> ".top"<br>
TopoDroid supports <i>PocketTopo</i> only in import.<br><p>

<!--
PocketTopo export contains only the survey data.<br><p>
If the station naming policy is set to "TopoRobot" and the station names follow TopoRobot convention "series.number"
these are used in the export, otherwise the names are converted to numbers.
Alphabetic characters are replaces each character with two digits. More precisely 'a' goes to '00', 'b' to '01' and so on, 'A' to '50', 'B' to '51', and so on. Every other character (i.e., non-alphanumeric) goes to '99'.<br><p>
-->

The "outline" and "profile" sketches are imported.
<i>PocketTopo</i> uses only a few colors to differentiate line types.
Therefore a <a href="page_pt_cmap.htm">mapping</a> from colors to TopoDroid types is used. The mapping can be changed through a setting.<br><p>

It may happen that the imported sketch is not aligned with the survey data. In this case you can shift the sketch in the
<u>Drawing window</u>, to fit the centerline.<br><p>


<b id="polygon">Polygon</b> ".cave"<br>
TopoDroid can export survey data in <i>Polygon</i> format. 
Fixed points are exported as lat-long.<br><p>


<!-- 
<b id="ghtopo">GHTopo</b> ".gtx"<br>
TopoDroid can export survey data in <i>GHTopo</i> format (partially tested).<br><p>
-->

<!-- 
<b id="grottolf">Grottolf</b> ".grt"<br>
TopoDroid can export survey data in <i>Grottolf</i> format (untested). 
If the first station has geographical coordinates these are exported, otherwise local coordinates are used.
The profile at the stations are computed by projecting the splay shots onto a vertical plane perpendicular to the
leg.<br><p>
-->


<b id="topo">Topo</b> ".cav"<br>
Survey data can be exported as <i>Topo</i> files.<br><p>

Settings (under "Survex" settings):<ul style="margin-top=0">
<li><u>line termination</u> can be either Linux or Windows</li>
</ul><p>


<b id="csv">CSV</b> ".csv"<br>
Survey data can be exported as a list of records with comma-separated fields:
<ul style="margin-top=0">
<li>"from" and "to" stations</li>
<li>distance, azimuth, clino</li>
<li>flag (L duplicate, S surface, C commented)</li>
</ul><br>
Shot comments are not exported. A brief header is prepended to the data list.<br>

The survey full data can be exported in CSV format. In this case each record (line) has
<ul style="margin-top=0">
<li>shot id</li>
<li>"from" and "to" stations</li>
<li>distance, azimuth, clino, roll</li>
<li>acceleration, magnetic field, dip</li>
<li>timestamp, type (device or manual), device-address</li>
<li>extend, flag, leg_type, status, comment</li>
<li>raw values</li>
</ul><br>
In the full data export the leg shots are not averaged, but exported individually.<br><p>

Settings:<ul style="margin-top=0">
<li><u>full data</u>: whether to export the full data</li>
<li><u>separator</u>: fields separator (comma, pipe or tab)</li>
<li><u>EOL</u>: record separator (Linux or Windows)</li>
</ul><br><p>


<b id="dxf">DXF</b> ".dxf"<br>
Survey data are exported as 3D DXF (<i>LibreCAD</i>) with layers
<ul style="margin-top=0">
<li>stations</li>
<li>legs</li>
<li>splays</li>
</ul><br>
Data are corrected with the magnetic declination.<br><p>

Settings:<ul style="margin-top=0">
<li>Splay <u>endpoints</u>: if enabled they are marked with crosses</li>
</ul><br><p>

<!--
<b id="plt">PLT</b> ".plt"<br>
Survey data can be exported as track file (<i>OziExplorer</i>) if you have georeferenced a station.
If the survey contains disjoint pieces, the track file includes all the pieces with a georeferenced station.
Data are corrected with the magnetic declination.<br><p>
-->

<b id="kml">KML</b> ".kml"<br>
Survey data can be exported as KML file (<i>Keyhole Markup Language</i>) if you have georeferenced at least a station.
If the survey contains disjoint pieces, the KML export includes all the pieces with a georeferenced station.
Data are corrected with the magnetic declination.<br><p>

Settings:<ul style="margin-top=0">
<li><u>stations</u></li>
<li><u>splays</u></li>
</ul>
<br><p>

<!--
<b id="geojson">GeoJSON</b> ".json"<br>
Survey data can be exported as GeoJSON file (<i>RFC 7946</i>) if you have georeferenced at least a station.
Shots are exported as <i>LineString</i>, stations as <i>Point</i>. 
If the survey contains disjoint pieces, the GeoJSON export includes all the pieces with a georeferenced station.
Data are corrected with the magnetic declination.<br><p>

Settings:<ul style="margin-top=0">
<li><u>stations</u></li>
<li><u>splays</u></li>
</ul>
<br><p>
-->

<b id="gpx">GPX track</b> ".gpx"<br>
The GPX export includes the stations (as waypoints) and the midline (as a track).<br>
The data coordinate system is WGS-84 geographic.
<br><p>


<b id="shp">Shapefile</b> ".shz"<br>
Survey data can be exported as shapefile. 
There is a shapefile for the stations and one for the shots (both legs and splays).
If the survey contains disjoint pieces, a shapefile is exported for each pieces with a georeferenced station.
Data are corrected with the magnetic declination.
Each shapefile consists of three files: the data file, with extension ".shp", the index file, ".shx", and the attributes file, ".dbf".
The files are zip-compressed and the zip is saved with extension ".shz".
<br><p>

If you have georeferenced at least a station and checked the appropriate checkbox in the export dialog,
the data are exported in the WGS84 reference system, and corrected with the magnetic declination.<br>
Otherwise the data are exported in local coordinates and the magnetic declination correction is not applied.<br><p>

The "stations" DBF contains only the field "name".<br><p>

The "shots" DBF contains the fields
<ul style="margin-top=0">
<li><i>type</i>: either "leg" or "splay"</li>
<li><i>from</i> station</li>
<li><i>to</i> station ("-" for splays)</li>
<li>shot <i>flag</i> as hex: 1-surface, 2-duplicate, 4-commented</li>
<li>shot <i>comment</i></li>
</ul><br>

Settings:<ul style="margin-top=0">
<li><u>stations</u>: whether to export the stations</li>
<li><u>splays</u>: whether to include the splays</li>
</ul><br><p>



<h4>SKETCH EXPORT</h4>

TopoDroid exports survey sketches to the following formats:
<ul>
<li><a href="#csx">cSurvey</a> ".csx"</li>
<li><a href="#th2">Therion</a> ".th2"</li>
<li><a href="#xvi">xtherion</a> ".xvi"</li>
<li><a href="#dxf2">DXF</a> ".dxf"</li>
<li><a href="#svg">SVG</a> ".svg"</li>
<li><a href="#pdf">PDF file</a> ".pdf"</li>
<li><a href="#shp2">shapefile</a> ".shz"</li>
<!-- li><a href="#tunnel">Tunnel</a></li -->
</ul>

The following sketch export formats are non longer supported:
<ul>
<li><a href="">PNG image</a></li>
<li><a href="">Cave3D</a></li>
</ul>
<br><p>

Screenshots of the sketch window and the overview window can be taken with the volume-up button.
Screenshots are saved in the "out" folder of the survey.<br><p>


<b id="csx">cSurvey</b> ".csx"<br>
The cSurvey export files require cSurvey v. 1.20 or later.<br>
These exports contain both the plan and profile sketches, as well as the survey data.
When "section" points are define the section drawings are added at the point.<br>

The cSurvey "cave" attribute is set with the survey name, and the "branch" attribute with the sketch name (without the suffix 'p' or 's').
The midline legs and splays and the sketch items share these attributes.<br><p>

If your survey has only one sketch this is a complete export of your work (except for the x-sections).
If the survey has more than one sketch, you must export each sketch individually and merge the exports with <i>cSurvey</i>.<br><p>

The sketch items are distributed on suitable <i>cSurvey</i> layers.<br><p>

Settings:<ul style="margin-top=0">
<li><u>station prefix</u> whether to add a prefix to the station names</li>
<li><u>line-point spacing</u> maximum distance between interpolating points on smooth lines</li>
</ul><p>

<b id="th2">Therion</b> ".th2"<br>
Sketches are exported in Therion format as one sketch per file, if exported from the <u>Drawing window</u>,
or as a file containing all the sketches with the same view, plan or extended, if exported
from the <u>Overview window</u>. In the latter there is a scrap for each sketch, and x-section scraps
are included if the automatic "section" points are enabled.
<br><p>

The Therion <i>scrap</i> names are composed of the survey name, the sketch name and a suffix, either 'p', for plan, or 's', for profile.<br>
For multi-scrap sketches the Therion <i>scrap</i> names of the scraps, beyond the first, are appended also a scrap number, beginning
with 1.<br>
X-section Therion <i>scrap</i> names are composed of the survey name, a two letter code, 'xx', and a number.<br><p>

When a sketch with section points is exported through the <u>export</u> dialog, the x-sections of the section points are
also exported.<br><p>

It the sketch contains symbols that are not included in the Therion set, you must prepend the
prefix "u:" to the unsupported symbol names, before using the th2 file.<br><p>

Settings:<ul style="margin-top=0">
<li>automatic <u>station-points</u>. [default: yes].</li>
<li>add <u>splays</u> to the scrap (as lines of type "splay") [default: no].</li>
<li>add a xtherion command to read the <u>XVI</u> image of the sketch [default: no].</li>
<li>export <u>scale</u>. Default 1:100</li>
<li><u>point spacing</u> minimum distance between points on polylines. Intermediate points are not exported. Default 20 cm</li>
</ul><p>

XVI images are not automatically exported with the Therion "th2" file, even if a xtherion command to include it is added to
the therion file, because it would not contain more information than the therion file.
The command can be used to load in xtherion an XVI image created by another program.
<br><p>

<!--
<u>Note</u>. With version 3.1 TopoDroid saves sketches "natively" in its binary format.<br>
Previous versions used Therion format.
The conversion from Therion to binary is "automatic" when you open a sketch: if TopoDroid does not find the binary file, it looks for the Therion file.<br>
From v. 4.1.2 TopoDroid does not load any more sketches in Therion format.<br>
-->

<!--
<b id="tunnel">Tunnel</b> ".xml"<br>
Sketch can be exported in Tunnel XML format. The files are saved in the "tnl" subdirectory.<br>
The following lines are mapped to Tunnel lines: wall, presumed, pit, chimney, and slope. 
All the other lines are mapped to Tunnel line "details".<br>
Area borders are mapped to Tunnel line "filled".<br>
The following points are mapped to Tunnel points: air-draught, archeo, blocks, clay, column, curtain, flowstone, gradient,
guano, mud, pebbles, popcorn, sand, soda-straw, stalactite, stalagmite, water, water-flow.
All the other points are mapped to Tunnel point "bedrock".<br>
<p>
-->

<b id="xvi">xtherion</b> ".xvi"<br>
The "xvi" export can be inserted as background image in xtherion.<br>
Lines of type "wall" are red, "slope" orange, "section" gray, all others are brown.
Area borders are black.
Point icons are rendered in a simplified way.
Label rendering supports only latin characters and digits and a few characters ('+', '-', '/', '_', '&gt;', '&lt;', '?').
Other characters are replaced by a "diamond".<br>
The sketch grid cell are 1 m.
<br><p>

The XVI settings are among Therion settings:<ul style="margin-top=0">
<li>Drawing <u>section-point</u>: if section points are automatically added to section lines,
the section drawing is inserted in the xvi file, at the "section" point</li>
<li><u>grid</u> lines added to the export (cell size in the current sketch grid units). Default no</li>
<li>export <u>scale</u>. Default 1:100</li>
</ul><p>

<!--
<b id="cave3d">Cave3D</b> ".c3d"<br>
Sketch exported in "c3d" format can be lifted in the 3D model inside the 3D viewer.<br>
<br><p>
-->

<b id="dxf2">DXF</b> ".dxf"<br>
Sketches can be exported as 2D DXF files. You can assign layers to individual symbol types (point, line, area) or levels.
Use the Z coordinate to separate scraps or levels. The DXF file contains only a few basic line types.<br><p>

Sketches can be exported as DXF <i>9</i> AC1009, <i>12</i> (R13) AC1012, and <i>14</i> (R14) AC1014.
For DXF-9 areas are exported with only the border and are not colored inside.
<br><p>

In DXF export, point symbols are drawn at the default size.
For example the default medium size for the point <i>blocks</i> is 1 meter.
<br><p>

It is possible to include in the DXF file, the x-sections (for which the sketch contains a "section" point),
and the X-Y axis.
<br><p>

Settings:<ul style="margin-top=0">
<li>DXF version: 9 (R12), 12 (R13), or 14 (R14). Default "9"</li>
<li><u>section-point</u>: if a section line has the relative section point,
the drawing of the section is inserted in the export, at the "section" point</li>
<li><u>XY reference</u>: whether to insert the XY axes reference</li>
<!-- li><u>stations</u>: whether to insert station points</li -->
<!-- li><u>interpolated curves</u>: whether to draw cubics as interpolated polylines</li -->
<!-- li><u>point spacing</u> maximum distance between interpolating points on smooth lines. Default 20 cm</li -->
<li>Scraps layer: DXF layers by scraps or type. Default "scraps"</li>
</ul><p>

<!-- b id="png">PNG</b> ".png"<br>
Image file in PNG format is used only to export sketches.<br>
The setting "levels" affects PNG exports: the export includes only the visible items.<br><p>

Settings:<ul style="margin-top=0">
<li><u>image resolution</u> (1 means that 1 m = 40 pixels). The PNG resolution that fits therion th2 export is 5.0.
If the system does not have enough memory to create the image at the set resolution, TopoDroid uses a smaller resolution until the export succeeds (or it gets so small that the program gives up trying).</li>
<li><u>background color</u>: whether to set the background color white, temporarily.</li>
<li><u>grid</u>: whether to include or not</li>
<li><u>splays</u>: whether to include or not</li>
<li><u>stations</u>: whether to include or not</li>
</ul><p -->

<b id="pdf">PDF</b> ".pdf"<br>
Sketch can be exported as PDF files.
Sketch PDF files are meant to be a quick way to share the survey with non-surveyors
in a format that anyone can open.<br><p>

The PDF file has a single page with a white background, and
it includes only the reference items (stations, splays, sketch grid, etc.) that are displayed on the screen.<br>
The text of labels, scalebar value and stations are reduced by 1/4.
The 1 m sketch grid is not drawn at scales smaller than 1:100.
The color of certain items (eg, labels) is inverted, for visibility.<br><p>

<!--
Settings:<ul style="margin-top=0">
<li><u>background color</u>: whether to set the background color white, temporarily.</li>
<li><u>splays</u>: whether to include or not the splays [unused]</li>
</ul><p>
-->

<b id="shp2">Shapefile</b> ".shp"<br>
Sketches can be exported as shapefile, with stations, shots, and lines.
Each item has three files: the shape data file, the shape index file, and the database file.
The files comprising the shapefile export are zip-compressed and the zip file is saved in the
folder "shp" with extension ".shz".<br><p>

If you have georeferenced at least a station and checked the appropriate checkbox in the export dialog,
the data are exported in the WGS84 reference system, and corrected with the magnetic declination.<br>
Otherwise the data are exported in local coordinates and the magnetic declination correction is not applied.<br><p>

The "point" DBF contains the fields
<ul style="margin-top=0">
<li>point <i>name</i></li>
<li><i>orientation</i></li>
<li><i>level</i></li>
<li><i>scrap</i></li>
<li>optional <i>text</i> (truncated to 128 characters)</li>
</ul><br>

The "extra" DBF contains the fields
<ul style="margin-top=0">
<li>point <i>name</i></li>
<li><i>orientation</i></li>
<li><i>level</i></li>
<li><i>scrap</i></li>
<li>optional <i>text</i> (truncated to 128 characters)</li>
<li><i>file</i></li>
</ul><br>

The "line" and "area" DBF contain the fields
<ul style="margin-top=0">
<li><i>type</i> that distinguishes between line and area</li>
<li>line or area <i>name</i></li>
<li><i>level</i></li>
<li><i>scrap</i></li>
</ul><br>

The "station" DBF contains the fields
<ul style="margin-top=0">
<li><i>name</i> of the station</li>
</ul><br>

The "shot" DBF contains the fields
<ul style="margin-top=0">
<li><i>type</i>: either "leg" or "splay"</li>
<li><i>from</i> station</li>
<li><i>to</i> station ("-" for splays)</li>
<li>shot <i>flag</i> as hex: 1-surface, 2-duplicate, 4-commented</li>
</ul><br>


<b id="svg">SVG</b> ".svg"<br>
Sketches can be exported as SVG files.<br>
Items are organized in layers: <i>sketch grids</i>, <i>stations</i>, <i>legs</i>, <i>splays</i>,
<i>points</i>, <i>lines</i>, and <i>areas</i>.<br>
These layers are under a global <i>canvas</i> layer.<br>
Each "scrap" has its  <i>points</i>, <i>lines</i>, and <i>areas</i> layers.<br>
<br><p>

The export scale is 1:100.
<br><p>

If splay classes are enabled, the splays are colored be the class: normal splay are gray,
horizontal are light sea-green, vertical light steel-blue, and xsection light sky blue.
Splay-classes are not supported in "round-trip" export.
<br><p>

Line effects, such as ticks in pit lines, are not exported, but the direction
can be shown enabling the "Line Direction" setting.<br><p>

Settings:<ul style="margin-top=0">
<li>SVG <u>program</u>: either Inkscape or Illustrator. This affect an export scale factor.</li>
<li>Drawing <u>section-point</u>: if section points are automatically added to section lines,
the section drawing is inserted in the export, at the "section" point</li>
<li>automatic <u>station-points</u>: if enabled all stations are included in the export,
otherwise only the user-chosen stations are included</li>
<li><u>grouping items</u> by the type (ie, Therion name)</li>
<li><u>point spacing</u> maximum distance between interpolating points on smooth lines</li>
<li><u>round-trip</u>: sketches are exported ready for Walls/Compass round-trip [no]</li>
<li><u>grid</u> lines added to the export (cell size in the current sketch grid units) [no]</li>
<li><u>line direction</u> tick [no]</li> 
<li><u>lines width</u>: labels, icons, lines (and area borders), sketch grid lines, shots, orientation stroke</li>
<li><u>station size</u>: station names text-size. Default 20</li>
</ul><p>



<h4>IMPORT/EXPORT SETTINGS</h4>
<ul>
  <li><i>Data default-export</i>: default data export format to present in the export dialog [default none]</li>
  <li><i>Sketch default-export</i>: default sketch export format to present in the export dialog [default none]</li>
  <li><i>Sketch auto-export</i>: if set sketches are exported in the chosen format when they are closed. The exported files are stored in the "out" subfolder of the survey folder. Sketch auto-export puts an extra load on the app, and is not set by default.</li>
  <li><i>ENABLE</i>: settings to enable data export formats.</li>
<li><b>Compass</b>:
  <ul>
    <li><i>swap LR</i>: swap L and R on Compass export</li>
  </ul>
</li>
<li><b>Compass/VisualTopo</b>:
  <ul>
    <li><i>Estimate LR extend</i>: on import of <b>Compass/VisualTopo</b> files [yes]</li>
  </ul>
</li>
<li><b>Compass/cSurvey/WinKarst</b>:
  <ul>
    <li><i>survey prefix</i> to the stations [no]</li>
  </ul>
</li>
<li><b>Compass/TopoRobot/WinKarst/Polygon/VisualTopo</b>:
  <ul>
    <li>minimum <i>splay-leg angle</i> for LRUD computation [0.0] This is also used in <b>Survex/Therion</b> if LRUD are required.</li>
    <li>minimum clino of splays used for up/down LRUD [0]</li>
    <li>maximum clino of splays used for left/right LRUD [90]</li>
  </ul>
</li>
<li><b>Therion</b>:
  <ul>
    <li><i>map commands</i> before or after the centerline block [after]</li>
    <li><i>auto-stations</i>: automatically add station points to the therion sketch file(s) [yes]. If you want to use the sketch files in therion they must have station points to define their scale. You can choose manually which point to add (by editing the sketch drawing), or let TopoDroid add the stations. The program will add all the stations that are "inside" the drawing (inside the drawing convex hull).</li>
    <li><i>splays</i> lines in Therion scraps [yes]</li>
  </ul>
</li>
<li><b>Therion/Survex</b>:
  <ul>
    <li>export with <i>LRUD</i> lines [no]</li>
  </ul>
</li>
<li><b>Survex</b>:
  <ul>
    <li>export with <i>named splay</i> TO stations [no]</li>
  </ul>
</li>
<li><b>Survex/Topo</b>:
  <ul>
    <li><i>line termination</i>: either Linux or Windows [Linux]</li>
  </ul>
</li>
<li><b>PocketTopo</b>:
  <ul>
    <li><i>import color-map</i>: map of PocketTopo colors to sketch item types.</li>
  </ul>
</li>
<li><b>SVG</b>:
  <ul>
    <li>target <i>program</i> [Inkscape]</li>
    <li>export with <i>sketch grid</i> [no]</li>
    <li>export line orientation ticks [no]</li>
    <li>stroke widths (labels, icons, lines, sketch grids, shots, orientation ticks)</li>
  </ul>
</li>
<li><b>DXF</b>:
  <ul>
    <li>export with <i>splay endpoints</i> [no]</li>
    <li><i>DXF version</i> for the DXF export: either 6, 12, or 16. In version 6 DXF export bezier curves are replaced by polylines and areas do not have hatches. Version 12 and 16 DXF exports use splines and hatches, but they are still buggy.</li>
  </ul>
</li>
<li><b>KML</b>: <!-- GeoJSON -->
  <ul>
    <li>export with <i>stations</i> [yes]</li>
    <li>export with <i>splays</i> [no]</li>
  </ul>
</li>
</ul>
<br><p>

<a href="page_finalmap.htm">The final map</a><br>
<a href="page_3d_export.htm">3D model export</a><br>
<a href="page_tdm_export.htm">Cave project export</a><br>
<a href="page_calib_import.htm">Calibrations</a> import/export<br>
<p>

<a href="manual12.htm">&lt; Overview window</a> |
<a href="manual14.htm">Cave Projects &gt;</a>

</body></html>
