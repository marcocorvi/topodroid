<html><body>
<h3>[13] IMPORT EXPORT </h3>
When you are done, export the survey in your favourite format and make a zip archive. The zip archive is the a complete backup of your survey, and its exports. You can use it to transfer the survey to another android.<br><p>

<b>Warning</b><br>
The zip archive contains the command to restore the survey data and other informations in the database.
Zip import fails if the zip has a database version that is too old or is newer than the one in TopoDroid.<br><p>

After you have downloaded the zip to your PC and unzipped it, you can complete the cave map with whatever program you are used to. The support of other cave survey file format in import may not be complete.<br><p>

<h4>Default export formats</h4>
TopoDroid has two settings to select a default export format for the survey data and one for the sketches.
By default these are both set to "none", ie, no export.
<br><p>

When the default survey data export format is set, TopoDroid exports the survey data in that format before creating a zip archive, so that the export is included in the archive.<br><p>

When the default sketch export format is set, the sketches are exported in this format whenever they are closed (besides being saved in TopoDroid binary format).<br>
For cSurvey cross-sections are saved as PNG images.<br><p>


<h4>SURVEY DATA EXPORT</h4>

Note. Fixed points are exported with coordinates latitude-longitude [decimal degrees] and altitude above
mean sea level [m].<br><p>

<b>Therion</b> (.th)<br>
Survey data are exported in <i>Therion</i> format, using the data "normal" form.<br>
Data units are according to the user options.<br>
The team names are listed but the command is commented.<br>
Station comments and marks (fixed, painted) precede the centerline data.<br><p>

Fixed points coordinates (longitude latitude and altitude a.s.l.) are exported commented.
If the point has custom CRS coordinates, these are exported as well, preceded by the CRS name.<br><p>

Furthermore "input" of the th2 files and definitions for a map for each scrap are added at the end, but are commented.<br><p>

Settings
<ul>
<li>"Therion Maps": if enabled the "map" commands are placed before the survey centerline.</li>
<li>"LRUD" to add LRUD to export</li>
</ul><p>

Import Therion files must have extension ".th".<br>
TopoDroid parsing of <i>Therion</i> data syntax is very limited. Basically only data in "normal" form are understood. The Therion data commands "units", "flag", "extend", "mark" and "station" are supported.<br>
Fixed points ("fix") are parsed but not taken into account as "cs" is not supported.<br><p>

<b>Compass</b> (.dat)<br>
<i>Compass</i> data file are supported both in import and in export.<br>
Import compass files must have extension either ".dat" or ".DAT".<br>
Data units are 'feet' and 'degrees'.<br><p>

<b>PocketTopo</b> (.top)<br>
TopoDroid supports <i>PocketTopo</i> both in import and in export.<br><p>

The exports contain only the survey data.<br>
On export station names with alphabetic characters must be converted to integer number. In this case TopoDroid replaces each character with two digits. More precisely 'a' goes to '00', 'b' to '01' and so on, 'A' to '50', 'B' to '51', and so on. Every other character (i.e., non-alphanumeric) goes to '99'.<br><p>

On import, "outline" and "profile" sketches are imported.
Import PocketTopo files must have extension either ".top" or ".TOP".<br>
<i>PocketTopo</i> uses only a few colors to differentiate line types.
Therefore a <a href="page_pt_cmap.htm">map</a> from colors to therion_types is used. The line and point types can be through a setting.<br><p>

It may happen that the imported sketch is not aligned with the survey data. In this case you can shift the sketch in the <i>Sketch</i> window, to fit the centerline.<br><p>

<b>Polygon</b> (.cave)<br>
TopoDroid can export survey data in <i>Polygon</i> format. 
Fixed points are exported as lat-long.<br><p>

<b>Grottolf</b> (.grt)<br>
TopoDroid can export survey data in <i>Grottolf</i> format. 
If the first station has geographical coordinates these are exported, otherwise local coordinates are used.
The profile at the stations are computed by projecting the splay shots onto a vertical plane perpendicular to the
leg.<br><p>

<b>Survex</b> (.svx)<br>
Survey data can be exported as <i>Survex</i> files.<br>
Data units are according to the user options.<br>
Settings:<ul style="margin-top=0">
<li>line termination can be either Unix or Windows</li>
<li>splay shots can be exported with a named TO station (named as the FROM station with a letter appended)</li>
<li>add LRUD to export</li>
</ul><p>

<b>Topo</b> (.cav)<br>
Survey data can be exported as <i>Topo</i> files.<br><p>

Settings:<ul style="margin-top=0">
<li>line termination can be either Unix or Windows</li>
</ul><p>


<b>VisualTopo</b> (.tro)<br>
<i>VisualTopo</i> data file are supported both in import and in export.<br>
Import VisualTopo files must have extension either ".tro" or ".TRO".<br>
Data units are 'meters' and 'degrees'.<br><p>

<b>Walls</b> (.srv)<br>
Survey data can be exported as <i>Walls</i> files.<br>
Data units are according to the user options.<br><p>

<b>PLT</b> (.plt)<br>
Survey data can be exported as track file (<i>OziExplorer</i>) if you have georeferenced a station.
Data are corrected with magnetic declination.<br><p>

<b>KML</b> (.kml)<br>
Survey data can be exported as KML file (<i>GoogleEarth</i>) if you have georeferenced a station.
Data are corrected with magnetic declination.<br><p>

<b>CSV</b> (.csv)<br>
Survey data can be exported as a list of records with comma-separated fields:
<ul style="margin-top=0">
<li>"from" station</li>
<li>"to" station</li>
<li>distance, azimuth, clino</li>
<li>if present the flag</li>
</ul><br>
Shot comments are not exported. A brief header is prepended to the data list.<br><p>

<b>DXF</b> (.dxf)<br>
Survey data are exported as 3D DXF with layers
<ul style="margin-top=0">
<li>stations</li>
<li>legs</li>
<li>splays</li>
</ul><br>
Data are corrected with magnetic declination.<br><p>

<h4>SKETCH EXPORT</h4>

<b>Therion</b> (.th2)<br>
<i>Therion</i> is the cave map drafting program of choice for TopoDroid.<br><p>

Sketches are exported to therion format with a scale 1:39.37<br><p>

Settings:<ul style="margin-top=0">
<li>extra point for area borders.  By default TopoDroid, unlike "xtherion", does not add an extra point coinciding with the first point, to closed area borders.</li>
<li>"station" points. [default: on].</li>
<li>add splays to the scrap (as lines of type "u:splay") [default: off].</li>
</ul><p>

<u>Note</u>. With version 3.1 TopoDroid saves sketches "natively" in its binary format.<br>
Previous versions used Therion format.
The conversion from Therion to binary is "automatic" when you open a sketch: if TopoDroid does not find the binary file, it looks for the Therion file.<br><p>

<b>cSurvey</b> (.csx)<br>
These exports contain both the plan and profile sketches, as well as the survey data.

The cSurvey "cave" attribute is set with the survey name, and the "branch" attribute with the sketch name.
The midline legs and splays and the sketch items share these attributes.<br><p>

If your survey has only one sketch this is a complete export of your work (except for the cross-sections).
If the survey has more than one sketch, you must export each sketch individually and merge the exports with <i>cSurvey</i>.<br><p>

The sketch items are distributed on suitable <i>cSurvey</i> layers.<br><p>

<b>DXF</b> (.dxf)<br>
Sketches can be exported as 2D DXF files with layers for each point, line and area type in addition to the layers of the data 3D DXF. The sketch items in the 2D DXF lie in the Z=0 plane.<br><p>

<u>Note</u>. Sketch DXF export has been verified with VariCAD; compatibility with AutoCAD is not guaranteed.<br><p>

Settings:<ul style="margin-top=0">
<li><u>scale</u> of the DXF</li>
<li><u>section-point</u>: if section points are automatically added to section lines,
the section drawing is inserted in the export, at the "section" point</li>
<!-- li>AutoCAD version (6 or 12)</li -->
</ul><p>

<b>SVG</b> (.svg)<br>
Sketches can be exported as SVG files.<br><p>

Settings:<ul style="margin-top=0">
<li>grid added to the export (cell size in the current grid units).</li>
<li><u>section-point</u>: if section points are automatically added to section lines,
the section drawing is inserted in the export, at the "section" point</li>
<li><u>auto-stations</u>: if enabled all stations are included in the export,
otherwise only the user-chosen stations are included</li>
</ul><p>

<b>PNG</b> (.png)<br>
Image file in PNG format is used only to export sketches.<br><p>

Settings:<ul style="margin-top=0">
<li>image resolution (1 means that 1 m = 40 pixels). The PNG resolution that fits therion th2 export is 5.0.
If the system does not have enough memory to create the image at the set resolution, TopoDroid uses a smaller resolution until the export succeeds (or it gets so small that the program gives up trying).</li>
<li>background color. Enter three numbers between 0 (black) and 255 (saturated) for red, green, and blue, respectively.</li>
</ul><p>

<h4>CALIBRATION EXPORT</h4>

<a href="page_calib_import.htm">Calibrations</a> can be exported and imported as CSV files (.ccsv).<br><p>

<h4>IMPORT/EXPORT SETTINGS</h4>
<ul style="margin-top=0">
<li><i>Default data export format</i>: defines the default format to which data are exported. This file is automatically generated and inserted in the ZIP export.</li>
<li><i>Default sketch export format</i>: defines the default format to which sketches are exported. These files are automatically generated whenever a sketch is closed. This puts some extra load on the system, so you may opt for explicitly exporting sketches after the survey session.</li>
<li><i>PocketTopo color-map</i>: defines how to map PocketTopo colors on types of sketch items, for import of PocketTopo files.</li> 
<li><i>Therion map commands</i>: whether to put the map commands before or after the centerline block.</li>
<li><i>Therion auto-stations</i>: whether to automatically add station points to the therion sketch file(s). If you want to use the sketch files in therion they must have station points to define their scale. You can choose manually which point to add (by editing the sketch drawing), or let TopoDroid add the stations. The program will add all the stations that are "inside" the drawing (inside the drawing convex hull).</li>
<li><i>cSurvey station prefix</i>: whether to add the survey prefix to the stations.</li>
<li><i>Survex line termination</i>: either Unix or Windows</li>
<li><i>Survex named splay</i>: whether to name the TO station of splays</li>
<li><i>Survex LRUD</i>: whether to add LRUD lines to survex exports [default no]</li>
<li><i>PNG resolution</i>: the resolution of the PNG files for sketch exports. It can be a number between 1 and 10. The higher the bigger the image (if you set it too high the system may not have enough memory to create the PNG).</li> 
<li><i>PNG background color</i>: you can set the background color of PNG images by specifying the RGB values (three integers between 0 and 255).</li>
<li><i>DXF scale</i>: scale of the DXF export of sketches.</li>
<li><i>DXF AutoCAD version</i> for the DXF export: either 6 (AutoCAD R9) or 12 (AutoCAD R13). In version 6 DXF export bezier curves are replaced by polylines. Version 12 DXF export uses splines, but is still buggy.</li>
</ul><br><p>


<a href="page_finalmap.htm">The final map</a><br>
<p>

<a href="manual12.htm">&lt; Overview window</a> |
<a href="manual14.htm">Index &gt;</a>

</body></html>
