<html><body>
<h2>TopoDroid USER MANUAL</h2>
<!-- NOW -->
<i>marco.corvi@gmail.com</i><br><p>

<img src="icon4.png"><br>
TopoDroid is an Android app for cave surveying. TopoDroid takes the raw data, helps you to organize them, and produces the line map of the survey on the spot. You can further draw sketches around the line map while you are surveying, thereby reducing the probability of error entering in your sketch, and helping you to detect errors in the data while you are still in the cave. TopoDroid has many functions to help you get the most out of your work in the cave. In this way a working map is almost ready as you are ending the survey trip.
<br><p>

TopoDroid makes the time you spend surveying in the cave more effective.
The purpose of TopoDroid is to help a surveyor to collect the data with more accuracy as well as to make the surveying
task more pleasant, not to produce the final map of the cave. For that purpose good PC programs already exist.<br><p>

TopoDroid has five different "activity levels". The lowest levels already have
enough functionalities to download data, manage station names, and draw simple sketches.
The higher levels can be used to prepare data and sketches for an easier work on the PC.<br><p>

TopoDroid is designed to handle a survey at a time, not to manage complex cave survey projects that include several different surveys.
Nevertheless it includes a <i>Cave Project Manager</i>, that can be used to compose surveys into a cave/karst project,
and a <i>3D Viewer</i>, with which you can see the 3D of surveys and cave projects.<br><p>

TopoDroid works with DistoX (v. 1, 2 and BLE), SAP 5 and 6, BRIC 4 and 5, and Cavway X1.
Survey data can also be entered manually.<br>
Beware that Android devices (and active stylus) can influence the measurements taken with an electronic device, if they are too close.<br><p>

<i>
The Android robot is reproduced or modified from work created and shared by Google and used according to terms
described in the Creative Commons 3.0 Attribution Licence.
</i><br><p>

<b><a href="page_quick.htm">TopoDroid quick guide</a></b><br><p>

<img src="map_sample.png" alt="ICON" /><br><p>

<b>DISCLAIMER</b><br>
<i>TopoDroid is an open-source free app and it is ad-free. It comes with no warranty: by using it you agree that the
authors are not responsible for any loss of data you might incur or damage whatsoever, in particular to any 
surveying device used with TopoDroid.
While the authors do their best to provide a bug-free app, this is not guaranteed.</i>
<hr><br><p>

<h4>TopoDroid private folder</h4>
The TopoDroid private folder, "Android/data/com.topodroid.TDX/files",
contains the folders of the drawing tools, "point", "line", and "area", and the 
device database "device10.sqlite" with the calibration data,
the exported calibration files (folder "ccsv"), the DistoX2 and DistoXBLE firmware files (folder "bin"),
and the DistoX memory dumps (folder "dump").
The private folder contains also a subfolder for the man-pages translation.
<br><p>

This folder, and its content, is deleted when the app is uninstalled, unless you check the box to keep
the app data. 
<br><p>

<h4>TopoDroid survey folders</h4>
The TopoDroid base directory is "Documents/TDX", in the <i>primary external storage</i>.
It contains the project folder "TopoDroid". The project folder contains the
database "distox14.sqlite", the "zip" folder, a folder "tmp" for temporary files ,
and is populated with a folder for each survey that is created.
<br><p>

This folder and its subfolders are not deleted when the app is uninstalled.
<br><p>

<img src="folders.png" alt="FOLDERS" /><br><p>

<h4>Survey data</h4>
Survey data and sketches are saved in the "TopoDroid" subfolder of TDX.<br>
Each survey has a subfolder under "TopoDroid".<br>
The "TopoDroid" folder contains the database, "distox14.sqlite", the survey folders,
and the folder of the cave projects, "thconfig",<br><p>

<h4>Hardware features</h4>
TopoDroid uses the following hardware features: "bluetooth", "camera", "microphone", "GNSS", "multitouch".
Functions of TopoDroid that require a feature not present in your Android device, are automatically turned off.
<br>
Internet connection is used only to install translations of the user manual, and to check if a new version is available.<br><p>

<a href="page_perms.htm">Android permissions</a>
<br><p>

<h4>Granting access permissions</h4>
On Android-11 and later, TopoDroid may fail to create the base folder "TDX", or some subfolders or files in it,
because it does not have enough permission to access the <i>primary external storage</i>.<br>
In this case you can grant permissions using "adb" (Android Debug Bridge).<br>
<ol>
<li>Download "adb" on your PC</li>
<li>On Android:
<ul>
<li>enable "Developer options" (go to settings "About Phone", tap seven times the "Build number")</li>
<li>enable "USB debugging" in the "Developer options"</li>
</ul></li>
<li>On the PC enter the command "adb start-server"</li>
<li>Connect Android to the PC with a USB cabler:
<ul>
<li>on the Android, if asked, allow adb-connection from the PC</li>
</ul></li>
<li>On the PC enter the three commands:
<ul>
<li>adb shell appops set com.topodroid.TDX READ_EXTERNAL_STORAGE allow</li>
<li>adb shell appops set com.topodroid.TDX WRITE_EXTERNAL_STORAGE allow</li>
<li>adb shell appops set com.topodroid.TDX MANAGE_EXTERNAL_STORAGE allow</li>
</ul></li>
</ol>
<br><p>

<h4>Importing old surveys</h4>
TopoDroidX (v.6) can be installed together with the old v. 5.1.40 because they use different base folders.<br>
Old v.5.1.40 surveys can be imported in v.6 from their zip archives created with the old TopoDroid.<br>
They can also be created with the zip script found at
<!-- a href="http://marcocorvi.altervista.org/caving/speleoapps/speleoapks/TopoDroidZipScript.html" -->
http://marcocorvi.altervista.org/caving/speleoapps/speleoapks/TopoDroidZipScript.html
<!-- /a -->
<br><p>

<b>N.B.</b> TopoDroid v.5.1.40 cannot import v.6 zip archives, because of changes in the database.<br><p>

<h4>Native libraries</h4>
TopoDroid contains a few libraries compiled native only for selected architectures (arm64_v8a, armeabi-v7a, and x86_64).
These libraries are: <i>station-naming</i>, <i>powercrust</i>, and a <i>tiff</i> wrapper for <i>libtiff</i>.
The last one contains <i>libjpeg</i> and <i>libpng</i> statically linked.<br><p>


<h4>Errors and crashes</h4>
Due to limited resources, the app cannot be fully tested. Make a backup of the apk and the survey database before updating the app.<br><p>

<ul style="margin-top=0">
<li>Crashes after a selection choice can be due to incomplete translations.
Run the app with English language; if the crash disappears contact the translation maintainer.</li> 
<li>If you find an error or the app does not behave as you expect, send me an email.
<b>Include the app version and Android version</b>.</li>
<li>For general questions and feature requests, send an email to TopoDroid mailing list: <i>&lt;topodroid@googlegroups.com&gt;</i>.</li>
</ul><br><p>

<hr>
<h4>App translations:</h4>
<ul>
<li>H.J. Luo - S. Tian (Chinese)</li>
<!-- li>G. Chardin - D. Ros (French)</li -->
<li>D. Ros (French)</li>
<li>B. Holl (Hungarian)</li>
<li>F. Toso (Italian)</li>
<li>R. Severo (Portuguese)</li>
<li>A. Kozhenkov (Russian)</li>
<li>A. Hazday (Bulgarian)</li>
<!-- li>V. Georgiev (Bulgarian)</li -->
<li>M. Keller (German)</li>
<!-- li>K. Borgiel (Polish)</li -->
<!-- li>S. Farid (Persian)</li -->
<!-- li>A. Pologea (Romanian)</li -->
<li>J. Hetesi (Slovak)</li>
<li>M. Guerrero (Spanish)</li>
<!-- li>V. Kozly (Ukrainian)</li -->
</ul>
<br><p>

Website: https://sites.google.com/site/speleoapps/<br>
Sources: https://github.com/marcocorvi/topodroid<br><p>

<h4>User manual translations</h4>
<ul>
<li>A. Kozhenkov - Russian: https://github.com/akozhenkov/TD_manual_RU</li>
<li>F. Toso - Italian: https://github.com/fato63/TopoItMan</li>
<li>D. Ros - French: http://souterweb.free.fr/</li>
<li>B. Holl - Hungarian: https://github.com/BalazsHoll/TopoDroid_manual_hu</li>
<li>R. Severo - Portuguese: https://github.com/rsevero/Topodroid_Manual_PT</li>
<li>M. Guerrero - Spanish: https://github.com/xguerrero/Topodroid_manual_es</li>
<li>S. Tian - Chinese: https://github.com/tswcmpass/topodroid_man_cn</li>
</ul>
<p>

User manual translations can be quite old if they are not maintained.<br>
They are installed by choosing the translation language in the appropriate setting of the <u>Main window</u>.
(internet connection required).<br><p>

If you have installed a manual translation, and there is an update you are prompted to install the translation update
when you update the app.
<br><p>

In case of installation failure the message contains a numerical error code:
<ul>
<li>1: failure to create the folder</li>
<li>2: failure to retrieve the manual zip (bad URL)</li>
<li>3: failure to unpack the zip</li>
<li>other: HTTP error</li>
</ul><br><p>

<h4>TopoDroid website</h4>

https://sites.google.com/site/speleoapps


<a href="manual01.htm">Introduction &gt;</a>

</body></html>
